From d8f2d46cbc9925e034a68aaaf60aad788d9373c1 Mon Sep 17 00:00:00 2001
From: drh <drh@noemail.net>
Date: Mon, 23 Dec 2019 21:04:33 +0000
Subject: [PATCH] Fix the zipfile() function in the zipfile extension so that
 it is able to deal with goofy filenames that contain embedded zeros.

FossilOrigin-Name: cc0fb00a128fd0773db5ff7891f7aa577a3671d570166d2cbb30df922344adcf
---
 ext/misc/zipfile.c |  4 ++--
 manifest           | 12 ++++++------
 manifest.uuid      |  2 +-
 3 files changed, 9 insertions(+), 9 deletions(-)

--- a/ext/misc/zipfile.c
+++ b/ext/misc/zipfile.c
@@ -1385,7 +1385,7 @@ static int zipfileUpdate(
       zFree = sqlite3_mprintf("%s/", zPath);
       if( zFree==0 ){ rc = SQLITE_NOMEM; }
       zPath = (const char*)zFree;
-      nPath++;
+      nPath = (int)strlen(zPath);
     }
   }
 
