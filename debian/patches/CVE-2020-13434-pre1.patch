Partial backport of:

From 255a81f10a5885a17d99ea20e13e1641029e6e3b Mon Sep 17 00:00:00 2001
From: drh <drh@noemail.net>
Date: Fri, 22 Feb 2019 15:42:10 +0000
Subject: [PATCH] Modify sqlite3_str_finish() and sqlite3VMPrintf() so that
 they always return NULL on any OOM or SQLITE_LIMIT_LENGTH error.

FossilOrigin-Name: e7144ffd21294d7aebbfa6aa5a262797a6d16de11193f1bf6b75f5f27b04c940
---
 manifest         | 14 +++++++-------
 manifest.uuid    |  2 +-
 src/printf.c     |  8 ++++----
 test/printf.test |  2 +-
 4 files changed, 13 insertions(+), 13 deletions(-)

--- a/test/printf.test
+++ b/test/printf.test
@@ -540,7 +540,7 @@ do_test printf-2.1.2.9 {
 } {abc: 1 1 (1e-20) :xyz}
 do_test printf-2.1.2.10 {
   sqlite3_mprintf_double {abc: %*.*f}  2000000000 1000000000 1.0e-20
-} {abc: }
+} {}
 do_test printf-2.1.3.1 {
   sqlite3_mprintf_double {abc: (%*.*f) :xyz} 1 1 1.0
 } {abc: (1.0) :xyz}
